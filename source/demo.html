<!DOCTYPE html>
<html lang="en">
<head>
    <title>SpecIF to ePub</title>
	<meta charset="utf-8" />
	<!--<meta http-equiv="cache-control" content="no-Cache" />-->
	<meta http-equiv="expires" content="0" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<script type="text/javascript" src="./lib/filesaver/src/fileSaver.js"></script>
	<script type="text/javascript" src="./lib/jszip/dist/jszip.js"></script>
	<script type="text/javascript" src="./js/specifData.js"></script>
	<script type="text/javascript" src="./js/toEpub.js"></script>
</head>
<body>
<div id="main">
	<h1>SpecIF to ePub</h1>
</div>
<script type="text/javascript">
	function zipCreator( ePub ) {
		let zip = new JSZip(),
			i=null;
		for( i=0,I=ePub.OEBPS.length; i<I; i++ ) {
			zip.file( "OEBPS/ch"+i+".xhtml", ePub.OEBPS[i] )
		};
		zip.generateAsync({
				type: "blob"
			})
			.then(function(blob) {
				saveAs(blob, ePub.title + ".epub")
			})
	}
(function() {
	// the DOM will be available here
	let model = specifData();
	let ePub = toEpub(model);
	console.debug(ePub);
	zipCreator(ePub)
})()
</script>
</body>
</html>